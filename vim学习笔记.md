# vim学习笔记

#### 1. 插入
```
	a	-- append
	i	-- insert
	o	-- open a line below
	
	A	-- append after line
	I	-- insert before line
	O	-- append a line above
```
#### 2. 删除
* `d`删除单词（delete）
* `x`删除字符
* d和x都可以和数字搭配执行多次
* `daw/dw,diw,dd,dt{char},d0/d$,{num}dd`删除单词不含空格，删除单词含空格，删除一行，删除到char位置，删除到行首/行尾，删除num行。。。
#### 3. 修改
* 常用三种，`r(replace),c(change),s(substitute)`
* normal模式下使用r可以替换一个字符。s替换并进入插入模式
* 使用c配合文本对象，我们可以快速修改，命令组合类似于d
#### 4. 查找
* 使用/或?进行向下或向上搜索
* 使用n/N跳转到下一个或者上一个匹配
* 使用*或#进行当前单词的向上或向下匹配
#### 5. 搜索替换
* `:[range] s[ubstitute]/{pattern}/{string}/[flags]`
* range表示范围，`:10,20`表示10-20行，`%`表示全部
* pattern是要替换的模式，string是替换后文本
* flags的几种常用标志
	* g(global)表示全局范围执行
	* c(confirm)表示确认，可以确认或者拒绝修改
	* n(number)报告匹配到的次数而不替换，可以用来做匹配次数查询
### 二、模式介绍
#### 1. normal模式
	普通模式也就是浏览模式，专注于浏览文字等
#### 2. Insert模式
	插入模式也就是编辑模式，专注于文字编辑
#### 3. command模式
	命令模式顾名思义，主要用于执行vim内置或插件中的命令。eg：`:wq`,`:set number`...
#### 4. visual模式
	可视化模式，多用于批量操作，进入方式为在normal模式时按v（选择）、V（行选择）、<ctrl+ v>（块选择）等

### 三、常用命令
### 四、小技巧
#### 1. 编辑模式
```
	ctrl+h	--删除上一个字符
	ctrl+w	--删除上一个单词
	ctrl+u	--删除当前行
```
#### 2. 快速切换编辑常规模式
* 使用`ctrl+c`或者`ctrl+[`代替`esc`
* gi快速跳转到上次编辑的地方并进入插入模式
### 五、快速移动
#### 1. 基础移动
```
	h	--左移
	j	--下移
	k	--上移
	l	--右移
```
#### 2. 单词跳跃
* `w/W` 移动到下一个单词开头。`e/E`下一个单词尾
* `b/B`回到上一个单词开头，可以理解为backword
* 小写为以非空白符分割的单词，大写为空白符分割的单词
#### 3. 行间搜索
* 使用`f{char}`可以移动到char字符上，`t`移动到char的前一个字符
* 如果第一次没搜到，可以用分号`;`或逗号`,`继续搜改行下一个或上一个
* `0`移动到行首第一个字符，`^`移动到第一个非空白字符
* `$`移动到行尾，`g_`移动到行尾非空白字符
#### 4. 垂直移动
* 是用括号`()`在句子间移动，`:help`查看帮助
* 使用`{}`在段落间移动（中文支持不好）
* 可以由easy-motion插件替换
#### 5. 页面移动
* `gg/G`移动到文件开头和结尾，`ctrl+o`快速返回
* `H/M/L`跳转到屏幕的开头（Head），中间（Midele）和结尾（Lower）
* `ctrl+u/ctrl+f`上下翻页（upword/forward），`zz`把屏幕置为中间
### 六、多文件
#### 1. 基础概念
* buffer是指打开的一个文件的内存缓冲区
	* 介绍
		* vim打开一个文件会加j载文件内容到缓冲区
		* 之后的修改都是针对内存中的缓冲区，并不会直接保存到文件
		* 直到`:w`时将缓冲区修改写入文件
	* 切换
		* 使用`:ls`会列举当前缓冲区，然后使用`:b {n}`跳转到第n个缓冲区
		* `:bpre :bnext :bfirst :blast`
		* 或者用`:b {buffer_name}`加上tab补全来跳转
		* `:e(edit) {file_name}`添加文件到buffer
* window是buffer可视化的分割区域
	* 介绍
		* 一个缓冲区可以分割成多个窗口，每个窗口也可以打开不同缓冲区
		* `<ctrl+w(window)> s`水平分割，`<ctrl+w> v`垂直分割。或者`:sp`和`:vs`
	* 切换
		|命令|用途|
		|:--:|:--:|
		|`<C-w>w/W`|在窗口间循环切换|
		|`<C-w>h/H`|切换/移动到左边的窗口|
		|`<C-w>j/J`|切换/移动到下边的窗口|
		|`<C-w>k/K`|切换/移动到上边的窗口|
		|`<C-w>l/L`|切换/移动到右边的窗口|
	* 重排	
		|命令|用途|
		|:--:|:--:|
		|`<C-w>=`|使所有窗口等宽等高|
		|`<C-w>_`|最大化活动窗口的高度|
		|`<C-w>\|`|最大化活动窗口的宽度|
		|`[N]<C-w>_`|把活动窗口的高度设为N行|
		|`[N]<C-w>\|`|把活动窗口的宽度设为N行|
* tab可以组成窗口为一个工作区
	* 介绍
		* vim的tab相当于idea中的工作区，类似于虚拟桌面
		* 相比window，tab应用一般较少，太多tab管理起来麻烦
	* 操作
		|命令|用途|
		|:--:|:--:|
		|`:tabe[dit] {filename}`|在新标签页中打开{filename}|
		|`<C-w>T`|把当前窗口移到一个新标签页|
		|`:tabc[lose]`|关闭当前标签页及其中的所有窗口|
		|`:tabo[nly]`|只保留活动标签页，关闭所有其他标签页|
	* 切换
		|ex命令|普通模式命令|用途|
		|:--:|:--:|:--:|
		|`:tabn[ext] {N}`|`{N}gt`|切换到编号为{N}的标签页|
		|`:tabn[ext]`|`gt`|切换到下一标签页|
		|`:tabp[revious]`|`gT`|切换上一标签页|

### 七、文本对象
#### 1. 基础概念
* 类似于java面向对象编程中的对象，例如一个单词，一短句子，一个段落
* 直接操作单词等来修改文本，高效
#### 2. 操作方式
* `[number]<command>[text object]`
* number表示次数
* command表示命令
	* d(delete)
	* c(change)
	* y(yank)
* text object表示要操作的文本对象
	* 单词w(word)
	* 句子s(sentence)
	* 段落p(part)
#### 3. 示例
* iw表示inner word。如果键入viw命令，那么首先v将进入选择模式，然后iw将选中当前单词。
* aw表示a word，它不但会选中当前单词，还会包含当前单词之后的空格。
### 八、复制粘贴和寄存器
#### 1. normal模式复制粘贴
* normal模式下复制粘贴分别使用y(yank)和p(put)，剪切d和p
* 可以使用v模式选择y复制p粘贴
* 配合文本对象：比如`yiw`复制一个单词，`yy`复制一行
#### 2. insert模式下的复制粘贴
* 鼠标选中`<C-c>`复制`<C-v>`粘贴，但是有个**坑**
* 很多人在vimrc中设置了autoindent，粘贴Python代码缩进错乱
* 此时就需要使用`:set paste`和`:set nopaste`解决
#### 3. 寄存器
* 无名寄存器
	* vim里操作的是寄存器而不是系统剪切板，这和其他编辑器不一样
	* 默认使用d删除y复制的内容都放到了“无名寄存器”
	* 用x删除一个字符放到无名寄存器，然后p粘贴，可以调换俩字符
* 深入寄存器
	* 通过`"{register}`前缀可以指定寄存器，不指定默认使用无名寄存器
	* 比如使用`"ayiw`就是将一个单词复制到寄存器a中，`"bdd`删除当前行到寄存器b中
	* 命令`:reg {register}`用于查看寄存器内容
	* vim中`""`表示无名寄存器，缺省使用。
* 其他常见寄存器
	* 复制专用寄存器`"0`，使用y复制文本时会被拷到复制寄存器`"0`
	* 系统剪贴板`"+`可以在复制前加上`"+`复制到系统剪切板
	* 其他的一些寄存器比如`"%`当前文件名，`".`上次插入文本
	* 命令`:set clipboard=unnamed`可以让你直接复制系统剪切板的内容 
### 九、宏
#### 1. 基础概念
* 宏（macro）可以看成一系列命令的集合
* 可以录制宏的一系列操作，然后用于回放
* 红可以非常方便的把一系列命令用在多行文本上
#### 2. 如何使用
* 宏分为录制和使用
* vim使用q来录制，同时也是q结束录制
* 使用q{register}选择要保存的寄存器，把录制的命令保存其中
* 只用@{register}回放寄存器中的一系列命令
* 多行批操作：q录制宏到a寄存器，v选则多行后`:`进入多行命令，输入`normal @a`对多行执行宏
* `<C-r>`重复上次命令
	
### 十、配置文件
#### 1. vimrc文件
* 存放位置
	* 全局配置文件`/etc/vim/vimrc`
	* 用户配置文件`~/.vimrc`
* 内容
	* 常用设置，例如`:set number`等
	* 常用映射，例如`noremap <leader>w:w<cr>`保存文件
	* 插件配置
	* vimscript函数
* 功能
	* vim启动时会先加载vimrc文件，节省操作
* 语法
	* vim normal模式中命令
	* 注释采用`" `前缀
	* `let `键盘映射
	* `set `属性设置
* 映射
	* 基本映射
		* 基本映射指的是normal模式下的映射，当然还有其他映射
		* 使用`:map {new} {old}`就可以实现映射，例如`:map - x `就可以将`-`映射为删除键
		* 使用`:unmap {new}`就可以解除映射
	* 模式映射
		* normal/visual/insert都可以定义映射
		* 用nmap/vmap/imap定义映射只在normal/visual/insert分别有效
		* 例如`:vmap \ U `把在visual模式下选中大写改为`\`
	* 递归与否
		* 使用*map对应的nnoremap/vnoremap/inoremap非递归映射
		* 一般应该使用非递归映射，避免出现其他问题
---

